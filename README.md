# 知乎内容爬虫

一个基于 Vue.js + Node.js + Puppeteer 的知乎问题及回答爬取工具。

## 项目特点

- 采用三层分离架构：前端 (Vue) + 服务端 (Node.js) + 无头浏览器 (Puppeteer)
- 通过模拟真实浏览器环境，有效绕过反爬机制
- 使用用户提供的 Cookie 进行访问，无需处理复杂的登录流程
- 支持无限滚动，获取问题下的所有回答
- 支持关键词搜索，快速找到相关问题
- 清洗 HTML，提供干净的纯文本内容
- 美观的用户界面，包含水印和统计信息展示
- 爬取过程实时可视化，直观展示爬取进度

## 技术栈

- **前端**：Vue 3 + Element Plus
- **后端**：Express.js
- **爬虫**：Puppeteer + StealthPlugin

## 安装与运行

### 环境要求

- Node.js 14.x 或更高版本
- 安装了 Microsoft Edge 或 Google Chrome 浏览器

### 安装依赖

```bash
# 安装所有依赖（包括前后端）
npm run install-all
```

### 开发模式

```bash
# 同时启动前端和后端服务
npm run dev-all

# 或分别启动
npm run dev  # 启动后端服务
npm run client  # 启动前端开发服务器
```

### 构建与部署

```bash
# 构建前端资源
cd client
npm run build

# 启动生产服务
cd ..
npm start
```

## 使用方法

### 关键词搜索

1. 启动应用后，访问 `http://localhost:5173`（开发模式）或 `http://localhost:3000`（生产模式）
2. 在首页的搜索框中输入关键词，点击「搜索」按钮
3. 查看搜索结果列表，包含问题标题、描述、关注数和回答数
4. 可以使用排序功能按回答数或关注数排序
5. 点击感兴趣的问题进入问题详情页，系统会自动爬取该问题的所有回答

### 回答爬取

1. 点击导航栏中的「回答爬取」进入爬取页面
2. 在首页点击「设置 Cookie」按钮，并按照提示设置知乎 Cookie
3. 在输入框中输入知乎问题链接（例如：`https://www.zhihu.com/question/12345678`）
4. 点击「开始爬取」按钮，等待数据爬取完成
   - 爬取过程中可以看到实时进度条和状态更新
   - 进度条显示当前爬取阶段、已发现回答数和滚动次数
5. 查看并使用爬取到的问题和回答数据，包含统计信息和可视化展示

### 账号登录

1. 点击页面右上角的「账号登录」按钮
2. 在弹出的登录对话框中输入手机号
3. 点击「获取验证码」按钮，系统会向您的手机发送验证码
4. 如果遇到滑动验证码：
   - 系统会自动尝试破解滑动验证码
   - 如果自动破解成功，将继续发送验证码流程
   - 如果自动破解失败，系统会显示浏览器窗口供您手动完成验证
5. 输入收到的验证码
6. 点击「继续登录」按钮
7. 如果登录过程中再次遇到验证码，系统也会尝试自动破解
8. 登录成功后，系统会自动获取并保存Cookie用于后续爬取操作

### 手动设置Cookie

如果您不想使用账号密码登录，也可以手动设置Cookie：

1. 点击页面右上角的「手动设置Cookie」按钮
2. 在浏览器中登录知乎
3. 按F12打开开发者工具，切换到「网络(Network)」面板
4. 刷新页面，点击任意zhihu.com请求
5. 在「请求头」中找到并复制cookie的值
6. 将复制的cookie粘贴到对话框中，点击「保存」按钮

## 注意事项

- 本工具仅供学习研究使用，请勿用于商业目的
- 请遵守知乎用户协议，尊重知乎及创作者的权益
- 频繁使用可能导致您的知乎账号被限制，请谨慎使用

## 项目结构

```
zhihu-scraper/
├── client/                # 前端项目
│   ├── public/            # 静态资源
│   └── src/               # 源代码
│       ├── components/    # 组件
│       ├── views/         # 页面
│       ├── App.vue        # 根组件
│       ├── main.js        # 入口文件
│       └── router/        # 路由配置
├── server.js              # 后端入口文件
├── package.json           # 项目依赖
└── README.md              # 项目说明
```

## 许可证

MIT 

## 会话记录

### 2023-11-XX 项目启动

**会话目的**：运行知乎爬虫项目

**完成的主要任务**：
- 安装前后端依赖
- 启动前端和后端服务

**关键决策和解决方案**：
- 使用`npm run install-all`命令安装所有依赖
- 使用`npm run dev-all`命令同时启动前端和后端服务

**使用的技术栈**：
- 前端：Vue 3 + Element Plus + Vite
- 后端：Express.js
- 爬虫：Puppeteer + StealthPlugin

**修改的文件**：
- 无文件修改，仅启动项目服务

### 2023-12-XX 项目重新运行

**会话目的**：重新运行知乎爬虫项目

**完成的主要任务**：
- 安装依赖并启动前端和后端服务
- 确认服务正常运行
- 更新项目文档

**关键决策和解决方案**：
- 分别启动后端服务（端口3000）和前端服务（端口5173）
- 解决PowerShell中命令执行问题
- 确认服务正常运行并可访问

**使用的技术栈**：
- 前端：Vue 3 + Vite（端口5173）
- 后端：Node.js + Express（端口3000）
- 爬虫：Puppeteer + StealthPlugin

**修改的文件**：
- README.md（更新项目运行说明）

### 2023-11-XX 添加关键词搜索功能

**会话目的**：为知乎爬虫项目添加关键词搜索功能

**完成的主要任务**：
- 实现知乎问题关键词搜索功能
- 搜索结果展示及分页功能
- 从搜索结果直接跳转到问题爬取页面

**关键决策和解决方案**：
- 服务端添加`/api/search-questions`接口，使用Puppeteer模拟搜索行为
- 前端添加专门的搜索页面
- 实现搜索结果到问题爬取的无缝跳转

**使用的技术栈**：
- 前端：Vue 3 + Vue Router + Element Plus
- 后端：Express.js
- 爬虫：Puppeteer

**修改的文件**：
- server.js：添加关键词搜索API接口
- client/src/views/Search.vue：新建搜索页面组件
- client/src/App.vue：添加导航菜单
- client/src/router/index.js：添加搜索页面路由
- client/src/views/Home.vue：支持URL参数自动爬取
- README.md：更新项目文档

### 2023-11-XX 修复关键词搜索功能

**会话目的**：修复关键词搜索功能无法返回结果的问题

**完成的主要任务**：
- 解决搜索功能因知乎页面结构变化导致无法获取结果的问题
- 增强选择器的适应性和健壮性
- 提升用户体验，添加更多的错误处理和提示

**关键决策和解决方案**：
- 使用多种CSS选择器尝试匹配知乎最新页面结构
- 添加失败时的调试信息和页面截图功能
- 前端增加友好的错误提示和重试功能

**使用的技术栈**：
- 前端：Vue 3 + Element Plus
- 后端：Express.js
- 爬虫：Puppeteer + 多层选择器策略

**修改的文件**：
- server.js：更新搜索API接口的选择器和匹配逻辑
- client/src/views/Search.vue：增强错误处理和用户体验
- client/src/views/Home.vue：优化URL参数处理
- README.md：更新修复记录

### 2023-11-XX 完善搜索功能的回答数显示

**会话目的**：完善关键词搜索功能中的回答数量显示

**完成的主要任务**：
- 增强回答数和关注数的视觉展示效果
- 添加按回答数和关注数排序功能
- 改进搜索结果与问题详情页面的导航体验
- 优化从问题详情返回搜索页面的状态恢复功能

**关键决策和解决方案**：
- 使用颜色编码直观表示回答数量（高、中、低）
- 实现对搜索结果的灵活排序
- 增加导航提示和返回功能，提升用户体验
- 使用路由参数保存搜索状态，实现无缝导航

**使用的技术栈**：
- 前端：Vue 3 + Element Plus + Vue Router
- 后端：Express.js + 增强的HTML解析
- 爬虫：Puppeteer + 改进的数据提取算法

**修改的文件**：
- server.js：增强回答数和关注数的提取逻辑
- client/src/views/Search.vue：添加排序功能和视觉增强
- client/src/views/Home.vue：优化URL参数处理
- README.md：更新功能说明

### 2023-11-XX 添加登录功能

**会话目的**：为知乎爬虫项目添加登录功能，支持手动验证拖动验证码

**完成的主要任务**：
- 创建登录对话框组件
- 实现发送手机验证码和验证码登录的后端API
- 在登录失败时，通过Puppeteer的非无头模式，让用户可以手动拖动滑块验证码
- 登录成功后，将Cookie保存到本地存储

**关键决策和解决方案**：
- 后端创建`/api/send-verification-code`和`/api/login-zhihu`接口，使用Puppeteer处理登录流程。
- 前端创建`LoginDialog.vue`组件，处理用户交互。
- 关键点：当Puppeteer检测到需要滑动验证码时，不再尝试自动处理，而是保持浏览器窗口打开，让用户介入。验证完成后，用户点击"继续"按钮，后端再继续执行登录操作。

**使用的技术栈**：
- 前端：Vue.js, Element Plus
- 后端：Node.js, Express, Puppeteer

**修改的文件**：
- `server.js`: 添加了登录相关的API接口 (`/api/send-verification-code`, `/api/login-zhihu`)。
- `client/src/components/LoginDialog.vue`: 创建了新的登录对话框组件。
- `client/src/App.vue`: 在主应用界面集成了登录对话框。
- `client/src/components/CookieDialog.vue`: 添加了切换到新登录方式的选项。

### 2024-01-18 优化登录功能并运行项目

**会话目的:** 优化并运行知乎爬虫项目。

**完成的主要任务:**
1.  **代码审查:** 分析了 `server.js` 和 `client/src/components/LoginDialog.vue` 的现有代码，以理解登录逻辑。
2.  **启动项目:**
    *   通过 `package.json` 确认了项目依赖和启动脚本。
    *   执行了 `npm run install-all` 来安装前后端所有依赖。
    *   执行了 `npm run dev-all` 以开发模式同时启动了后端 Node.js 服务器和前端 Vue.js 开发服务器。

**关键决策和解决方案:**
*   选择 `dev-all` 脚本来运行项目，因为它能同时启动前后端服务并启用热重载，便于开发和调试。

**使用的技术栈:**
*   **后端:** Node.js, Express, Puppeteer
*   **前端:** Vue.js
*   **构建/工具:** npm, nodemon, concurrently

**修改的文件:**
*   本次会话主要在于运行和调试，未对文件进行修改。

### 2024-01-18 重构验证码登录功能

**会话目的:** 实现一个稳定可靠的知乎验证码登录功能。

**完成的主要任务:**
1.  **后端重构:**
    *   重构了 `/api/send-verification-code` 和 `/api/login-zhihu` 两个接口，简化了登录流程。
    *   移除了原来复杂且不稳定的自动滑块验证、`iframe` 交互等逻辑。
    *   实现了新的登录流程：后端打开一个可见的浏览器窗口，由用户手动完成滑块验证，然后后端再继续处理登录。
2.  **前端修改:**
    *   修改了 `LoginDialog.vue` 组件，使其与新的后端API和流程相匹配。
    *   移除了所有 `iframe` 和相关的复杂状态管理。
    *   更新了UI提示，以正确引导用户在外部浏览器窗口中进行操作。

**关键决策和解决方案:**
*   放弃了脆弱的、完全自动化的验证码处理方案，回归到一种更稳定、用户参与度更高的半自动化方案。这个方案让用户直接处理最棘手的人机验证部分，大大提高了登录的成功率和稳定性。

**使用的技术栈:**
*   **后端:** Node.js, Express, Puppeteer (非无头模式)
*   **前端:** Vue.js, Axios

**修改的文件**：
*   `server.js`: 彻底重构了登录相关的所有API接口和会话管理逻辑。
*   `client/src/components/LoginDialog.vue`: 调整了整个组件的逻辑和UI以适应新的后端流程。

## 会话总结：修复页面切换问题

**会话目的**：修复从关键词搜索页面到回答爬取页面切换无响应的问题

**完成的主要任务**：
1. 修复了从搜索结果点击问题跳转到爬取页面无响应的问题
2. 完善了路由参数传递机制，确保页面间数据正确传递
3. 优化了路由配置，增加了全局导航功能和滚动行为设置
4. 改进组件间通信，确保Cookie状态能正确共享

**关键决策和解决方案**：
- 修改路由配置，使用props传递参数而非仅依赖路由查询参数
- 增强了goToQuestion方法，添加备用跳转机制确保页面切换成功
- 改进Home组件的参数接收逻辑，兼容多种参数传递方式
- 添加全局的scrollBehavior设置，确保页面跳转后滚动到顶部
- 使用provide/inject机制共享Cookie状态

**使用的技术栈**：
- Vue 3 + Vue Router
- 组件通信：Props和Provide/Inject
- 路由导航和错误处理

**修改的文件**：
- `client/src/router/index.js`: 修改路由配置，添加props传递和滚动行为
- `client/src/views/Search.vue`: 增强goToQuestion方法，添加备用跳转机制
- `client/src/views/Home.vue`: 改进参数接收逻辑，优化组件挂载流程
- `client/src/App.vue`: 完善provide配置，确保Cookie状态共享

## 会话总结：完善页面切换机制

**会话目的**：彻底解决从搜索页面到回答爬取页面切换的问题，确保双向导航都能正常工作

**完成的主要任务**：
1. 彻底重构了导航机制，确保搜索页面和爬取页面之间能够可靠地双向切换
2. 修复了之前导航按钮点击后无响应的问题
3. 添加了多重备用导航方案，确保在各种情况下都能完成页面跳转
4. 保留了所有已有功能，无任何功能退化

**关键决策和解决方案**：
- 使用HTML原生导航代替router-link，实现更可靠的页面切换
- 对goToQuestion方法进行彻底重构，优先使用window.location.href实现完全页面重载
- 为backToSearch函数添加多层错误处理和备选方案
- 添加全局路由导航守卫，处理特殊情况下的页面访问
- 实现对fromSearch参数的动态监听，确保组件能够适应不同的导航场景

**使用的技术栈**：
- Vue 3 + Vue Router
- HTML原生导航 + JavaScript页面跳转
- Vue watch API监听属性变化
- 全局路由导航守卫
- 多层错误处理策略

**修改的文件**：
- `client/src/router/index.js`: 添加全局导航守卫和通配路由
- `client/src/App.vue`: 修改导航链接实现方式
- `client/src/views/Search.vue`: 重构goToQuestion方法
- `client/src/views/Home.vue`: 增强backToSearch函数并添加props监听
- `README.md`: 更新修复记录

## 会话总结：彻底解决导航问题

**会话目的**：彻底解决关键词搜索页面无法手动切换到回答爬取页面的问题

**完成的主要任务**：
1. 彻底重构了导航机制，确保在任何情况下都能成功切换页面
2. 使用原生HTML锚点链接替代Vue Router的导航组件，确保稳定性
3. 增加多层冗余的错误处理机制，确保页面切换不会失败
4. 完善了路由导航守卫和钩子，提供更好的调试信息

**关键决策和解决方案**：
- 改用直接HTML导航链接`<a href="/crawler">`替代router-link和事件处理
- 设计双路由激活状态计算，确保导航高亮正确显示
- 修复了router.push方法的重复导航错误处理
- 优化了路由守卫，无条件放行爬取页面访问
- 添加了路由导航日志，方便排查问题

**使用的技术栈**：
- HTML原生导航
- Vue 3 + Vue Router
- 导航守卫和路由钩子
- 计算属性动态样式控制

**修改的文件**：
- `client/src/App.vue`: 彻底重构导航菜单，使用原生HTML导航
- `client/src/router/index.js`: 修复路由导航错误处理，完善路由守卫
- `README.md`: 更新修复记录

## 更新日志

### 2023-10-15 进度可视化优化

**会话目的**: 改进爬取进度条的同步准确性，并为关键词搜索页面添加进度可视化功能

**完成的主要任务**:
1. 优化问题回答爬取的进度条准确性，使其与实际爬取进度更加同步
2. 为关键词搜索功能添加进度可视化展示
3. 改进进度条动画效果，提供更平滑的视觉体验

**关键决策和解决方案**:
- 问题爬取进度条:
  - 修改为基于服务器返回的实际数据动态更新进度
  - 从日志信息中提取回答数量和滚动次数
  - 使用requestAnimationFrame实现平滑过渡动画
  - 根据当前阶段和已发现回答数量动态调整进度

- 搜索功能进度条:
  - 采用三阶段进度显示（加载页面、执行搜索、提取结果）
  - 实现步骤指示器，直观显示当前搜索阶段
  - 添加实时计时器，显示搜索用时

**使用的技术栈**:
- 前端: Vue 3 (Composition API), Element Plus, CSS3 动画
- 动画: requestAnimationFrame API用于平滑过渡

**修改的文件**:
- `client/src/views/Home.vue`: 改进回答爬取进度条的准确性和同步性
- `client/src/views/Search.vue`: 添加关键词搜索进度显示功能
- `README.md`: 更新文档，添加进度条改进相关内容 

## 会话总结：项目重启

**会话目的**：重新启动知乎爬虫项目，确保前端和后端服务正常运行。

**完成的主要任务**：
1. 停止所有可能正在运行的Node进程
2. 构建前端项目，生成静态文件
3. 启动后端服务器
4. 验证服务可用性

**关键决策和解决方案**：
- 由于Windows PowerShell不支持`&&`运算符，采用分步执行命令的方式
- 解决了前端静态文件不存在的问题，通过先构建前端项目再启动服务器
- 使用`Invoke-WebRequest`验证服务可用性

**使用的技术栈**：
- 前端：Vue 3 + Vite
- 后端：Node.js + Express
- 爬虫：Puppeteer

**修改的文件**：
- 无文件修改，仅重启服务 

## 会话总结：创建技术报告

**会话目的**：为知乎爬虫项目创建详细的技术报告文档

**完成的主要任务**：
1. 创建了全面的项目技术报告，详细说明项目架构、实现原理和技术选型
2. 深入分析了项目的核心功能模块和关键技术实现
3. 系统总结了项目面临的挑战和解决方案
4. 提出了项目未来的发展方向和优化建议

**关键决策和解决方案**：
- 采用结构化的文档格式，分为九大章节全面覆盖项目技术细节
- 重点详述三层架构设计的演进过程和技术优势
- 深入分析反爬机制的应对策略和无限滚动的实现原理
- 总结了多层选择器策略和数据清洗方案

**使用的技术栈**：
- 前端：Vue 3 + Element Plus
- 后端：Express.js
- 爬虫：Puppeteer + StealthPlugin
- 文档：Markdown格式技术报告

**修改的文件**：
- 新增：技术报告 - 详细的项目技术文档
- 更新：README.md - 添加会话记录 

### 2023-12-04 项目运行

**会话目的**：运行知乎爬虫项目

**完成的主要任务**：
- 安装服务器端和客户端依赖
- 成功启动前端和后端服务

**关键决策和解决方案**：
- 使用分步安装方式解决Windows PowerShell不支持&&操作符的问题
- 使用`npm run dev-all`命令同时启动前端和后端服务

**使用的技术栈**：
- 前端：Vue 3 + Element Plus + Vite
- 后端：Express.js
- 爬虫：Puppeteer + StealthPlugin

**修改的文件**：
- 无文件修改，仅启动项目服务 

### 2024-XX-XX 添加知乎账号登录功能

**会话目的**：为知乎爬虫项目添加账号登录功能，支持手动验证拖动验证码

**完成的主要任务**：
- 创建新的LoginDialog.vue组件，实现用户名密码登录界面
- 在服务器端添加知乎登录相关API接口
- 支持手动验证拖动验证码功能
- 更新App.vue，添加登录功能入口
- 更新项目文档，添加登录功能使用说明

**关键决策和解决方案**：
- 使用非无头模式的Puppeteer浏览器，便于用户手动验证验证码
- 实现会话管理机制，保存验证过程中的浏览器状态
- 使用iframe嵌入知乎登录页面，方便用户完成验证
- 添加会话过期清理机制，避免资源泄露

**使用的技术栈**：
- 前端：Vue 3 + Element Plus
- 后端：Express.js + Puppeteer
- 会话管理：Map数据结构 + 定时清理

**修改的文件**：
- client/src/components/LoginDialog.vue（新建）
- server.js（添加登录相关API接口）
- client/src/App.vue（添加登录功能入口）
- README.md（更新使用说明）

### 2024-XX-XX 将密码登录改为手机验证码登录

**会话目的**：将知乎账号登录方式从密码登录改为手机验证码登录

**完成的主要任务**：
- 修改LoginDialog.vue组件，将密码输入框改为验证码输入框
- 添加获取验证码按钮和倒计时功能
- 在服务器端添加发送验证码API接口
- 修改登录API接口，支持验证码登录
- 更新验证码验证接口，支持手机号参数

**关键决策和解决方案**：
- 使用非无头模式的Puppeteer浏览器，自动点击短信登录选项
- 实现验证码会话管理机制，保存发送验证码后的浏览器状态
- 添加验证码倒计时功能，避免频繁请求
- 使用多种选择器策略，适应知乎页面可能的变化
- 添加验证码会话过期清理机制，避免资源泄露

**使用的技术栈**：
- 前端：Vue 3 + Element Plus
- 后端：Express.js + Puppeteer
- 会话管理：Map数据结构 + 定时清理
- 组件生命周期：onBeforeUnmount清理定时器

**修改的文件**：
- client/src/components/LoginDialog.vue（修改登录表单）
- server.js（添加发送验证码API接口，修改登录接口）
- README.md（更新使用说明） 

### 2024-04-XX 添加滑动验证码自动破解功能

**会话目的**：将知乎爬虫项目的登录功能从手动验证改为自动破解滑动验证码

**完成的主要任务**：
- 实现滑动验证码自动检测与破解
- 优化服务器启动逻辑，解决端口占用问题
- 增强会话管理机制，提高系统稳定性

**关键决策和解决方案**：
- 添加验证码检测功能，支持多种知乎特定验证码元素的识别
- 实现人工轨迹模拟算法，生成更自然的滑动轨迹
- 采用多次尝试策略，使用不同滑动距离提高破解成功率
- 添加自动端口切换功能，当默认端口被占用时自动尝试下一个可用端口
- 完善会话有效期检查和自动清理机制

**使用的技术栈**：
- 前端：Vue 3 + Element Plus
- 后端：Express.js + 会话管理
- 爬虫：Puppeteer + 验证码自动破解

**修改的文件**：
- server.js：添加验证码检测和自动破解功能，优化服务器启动逻辑
- README.md：更新项目文档，添加滑动验证码自动破解说明 

### 2025-06-XX CSV文件格式修复

**会话目的**：解决知乎爬虫项目中文件格式和前端显示不一致的问题，将文件格式统一为CSV。

**完成的主要任务**：
1. 检查后端日志，确认文件生成和下载流程
2. 修改服务器代码，将TXT格式改回为CSV格式
3. 更新前端界面，将"下载文本文件"改为"下载CSV文件"
4. 重新构建前端代码并重启服务器

**关键决策和解决方案**：
- 保留服务器端的CSV生成逻辑，确保正确处理特殊字符和字段转义
- 在前端界面中更新所有与文件下载相关的提示信息
- 保持API接口字段名不变，以维持前后端兼容性

**使用的技术栈**：
- 后端：Node.js + Express + Puppeteer
- 前端：Vue.js + Element UI
- 文件格式：CSV (逗号分隔值)

**修改的文件**：
- server.js：修改文件生成逻辑，从TXT改为CSV
- client/src/views/Home.vue：更新下载按钮和提示信息

### 2025-06-25 修复文件格式和重启前端服务

**会话目的**：修复知乎爬虫项目中文件格式问题并重启前端服务

**完成的主要任务**：
- 将后端生成的文件格式从TXT改回CSV，确保与前端显示一致
- 解决PowerShell中命令执行问题
- 成功重启前端服务

**关键决策和解决方案**：
- 修改server.js文件中的文件格式生成逻辑，从TXT改为CSV
- 在PowerShell中使用分号分隔命令而非&&符号
- 使用`cd client; npm run serve`命令重启前端服务

**使用的技术栈**：
- 前端：Vue 3 + Vite（端口5173）
- 后端：Node.js + Express（端口3000）
- 爬虫：Puppeteer + StealthPlugin

**修改的文件**：
- server.js：修改文件格式生成逻辑
- README.md：更新项目运行记录

### 2024-06-XX 重新启动项目服务

**会话目的**：重新启动知乎爬虫项目的后端和前端服务

**完成的主要任务**：
- 启动后端服务
- 启动前端服务
- 确认两个服务正常运行

**关键决策和解决方案**：
- 使用`npm start`命令启动后端服务
- 使用`npm run serve`命令启动前端服务
- 两个服务均在后台运行，保持终端可用

**使用的技术栈**：
- 前端：Vue 3 + Element Plus
- 后端：Node.js + Express
- 爬虫：Puppeteer

**修改的文件**：
- 无文件修改，仅启动项目服务

### 2024-06-XX 修复CSV文件下载内容错误问题

**会话目的**：修复前端浏览器下载的CSV文件内容变成HTML的问题

**完成的主要任务**：
- 分析服务器端下载接口和前端路由处理逻辑
- 修复服务器端路由顺序，确保API接口优先于通配符路由
- 重启前端和后端服务

**关键决策和解决方案**：
- 发现问题原因：下载API接口被定义在通配符路由之后，导致下载请求被错误地重定向到前端
- 将下载API接口的定义移到通配符路由前面，确保下载请求能正确处理
- 使用文件流直接发送文件内容，不进行任何修改

**使用的技术栈**：
- 后端：Node.js + Express + 路由优先级处理
- 前端：Vue 3 + fetch API

**修改的文件**：
- server.js：调整API路由定义顺序，确保下载接口优先于通配符路由

### 2024-05-XX 重新运行项目

**会话目的**：重新运行知乎爬虫项目并确认功能正常

**完成的主要任务**：
- 安装前后端所有依赖
- 同时启动前端和后端服务
- 验证服务正常运行

**关键决策和解决方案**：
- 使用`npm run install-all`安装所有依赖
- 使用`npm run dev-all`同时启动前后端服务
- 通过端口检查确认服务正常运行（前端5173端口，后端3000端口）

**使用的技术栈**：
- 前端：Vue 3 + Element Plus + Vite
- 后端：Express.js + Node.js
- 爬虫：Puppeteer + StealthPlugin

**修改的文件**：
- README.md（添加本次会话总结）

### 2024-05-XX Docker化项目并部署到Render.com

**会话目的**：将知乎爬虫项目Docker化并准备部署到Render.com平台

**完成的主要任务**：
- 创建Dockerfile，配置适合Puppeteer运行的Docker环境
- 修改server.js，使其能够在Docker容器中正确使用Chrome浏览器
- 创建.dockerignore文件，优化Docker镜像大小
- 创建render.yaml配置文件，简化Render.com部署流程
- 编写DEPLOY.md部署指南，提供详细部署步骤

**关键决策和解决方案**：
- 使用node:18-slim作为基础镜像，减小镜像体积
- 安装Chrome浏览器而非Chromium，提高兼容性
- 添加中文字体支持（文泉驿字体）
- 通过环境变量配置Puppeteer使用系统安装的Chrome
- 修改server.js中的浏览器启动逻辑，适应容器环境
- 配置适当的Chrome启动参数，解决容器中的沙箱和内存限制问题

**使用的技术栈**：
- Docker容器化
- Node.js + Express
- Puppeteer + Chrome
- Render.com云平台

**修改的文件**：
- 新增：Dockerfile（Docker构建配置）
- 新增：.dockerignore（排除不必要文件）
- 新增：render.yaml（Render.com部署配置）
- 新增：DEPLOY.md（部署指南文档）
- 修改：server.js（适配Docker环境）
- 修改：README.md（更新项目文档）